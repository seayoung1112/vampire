{%extends "../base.html"%}
{%block content%}
  <script src="{{static_url("js/subscribe.js")}}" type="text/javascript"></script>
  <script>
  $(function(){
    function handleMessage(message) {
      if (message.type == "delete")
        $("#room"+message.id).remove();
      else if(message.type == 'update')
        $("#room"+message.id).html(message.html);
      else{
        var node = $(message.html);
        node.hide();
        $("#rooms").append(node);
        node.slideDown();
      }
    }
    subscribe("hall", handleMessage);
  });
  </script>
  <!-- <a id="create-game">ï¿½?ï¿½</a> -->
  <form action="/createGame" method="post">
    <p><label>æˆ¿é—´å:</label><input type="text" name="name"/>
    <input type="submit" value="åˆ›å»ºæˆ¿é—´"/>
    {{ xsrf_form_html() }}
  </form>
  <table>
    <tbody id="rooms">
    <tr>
      <th>æˆ¿é—´å·</th>
      <th>æˆ¿é—´å</th>
      <th>æˆ¿ä¸»</th>
      <th>äººæ•°</th>
      <th>çŠ¶æ€</th>
      <th>åˆ›å»ºæ—¶é—´</th>
    </tr>
    {%for game in games%}
      {%include "../game/game_unit.html"%}
    {%end%}
    </tbody>
  </table>
  <!-- <div id="game-create-dlg">
    ?ï¿½:<input type="text" name="name" id="name"/>
  </div> -->
{%end%}
